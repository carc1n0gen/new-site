1:HL["/_next/static/css/c203d5034737be7b.css",{"as":"style"}]
0:["DY8K5Zm5XbKhql3B1mYHI",[[["",{"children":[["year","2014","d"],{"children":[["month","06","d"],{"children":[["day","17","d"],{"children":[["slug","create-a-json-web-service-with-flight-php","d"],{"children":["__PAGE__?{\"year\":\"2014\",\"month\":\"06\",\"day\":\"17\",\"slug\":\"create-a-json-web-service-with-flight-php\"}",{}]}]}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/c203d5034737be7b.css","precedence":"next"}]],["$L3",null]]]]]
4:I{"id":7095,"chunks":["95:static/chunks/95-b42e21927908bec6.js","224:static/chunks/224-45995354792692c9.js","106:static/chunks/app/[year]/[month]/[day]/[slug]/page-fd3e7a5daa90e646.js"],"name":"","async":false}
5:I{"id":7289,"chunks":["95:static/chunks/95-b42e21927908bec6.js","185:static/chunks/app/layout-d31561f1664396e8.js"],"name":"","async":false}
6:I{"id":9180,"chunks":["272:static/chunks/webpack-f6cc04085737af64.js","253:static/chunks/bce60fc1-3d7875a7a6202410.js","698:static/chunks/698-4595f783858dddc6.js"],"name":"default","async":false}
7:I{"id":2306,"chunks":["272:static/chunks/webpack-f6cc04085737af64.js","253:static/chunks/bce60fc1-3d7875a7a6202410.js","698:static/chunks/698-4595f783858dddc6.js"],"name":"default","async":false}
2:[["$","html",null,{"lang":"en","className":"dark:bg-black md:bg-zinc-50 md:dark:bg-zinc-800","children":["$","body",null,{"className":"text-zinc-700 dark:text-zinc-300","children":[["$","header",null,{"className":"bg-white dark:bg-black text-center md:text-left mt-5 md:mt-0 md:pt-10 border-b border-b-zinc-300 dark:border-b-zinc-600","children":[["$","div",null,{"className":"md:max-w-screen-md px-2 md:px-0 mx-auto","children":[["$","img",null,{"src":"/img/avatar-new.jpg","alt":"Avatar photo","className":"rounded-full mx-auto md:float-right md:-mt-4","width":"100","height":"100"}],["$","div",null,{"className":"mt-5","children":[["$","$L4",null,{"href":"/","className":"mt-2","children":["$","h1",null,{"className":"text-5xl font-bold","children":"Carson's Blog"}]}],["$","p",null,{"className":"mt-2","children":"Somewhat coherent tutorials about web stuff and things."}]]}]]}],["$","$L5",null,{}]]}],["$","main",null,{"className":"px-4 py-2 md:p-0 md:max-w-screen-md mx-auto","children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":["$","section",null,{"className":"mt-6 p-6 bg-white border border-zinc-300","children":[["$","h1",null,{"className":"font-bold text-3xl mb-4","children":"Not Found"}],["$","p",null,{"children":"Are you lost? There doesn't seem to be anything here"}]]}],"notFoundStyles":[],"childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children",["year","2014","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children",["year","2014","d"],"children",["month","06","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children",["year","2014","d"],"children",["month","06","d"],"children",["day","17","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children",["year","2014","d"],"children",["month","06","d"],"children",["day","17","d"],"children",["slug","create-a-json-web-service-with-flight-php","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$L8",null],"segment":"__PAGE__?{\"year\":\"2014\",\"month\":\"06\",\"day\":\"17\",\"slug\":\"create-a-json-web-service-with-flight-php\"}"},"styles":[]}],"segment":["slug","create-a-json-web-service-with-flight-php","d"]},"styles":[]}],"segment":["day","17","d"]},"styles":[]}],"segment":["month","06","d"]},"styles":[]}],"segment":["year","2014","d"]},"styles":[]}]}],["$","footer",null,{"className":"mt-6 mb-4 text-center","children":"© Carson Evans"}]]}]}],null]
3:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Create a JSON Web Service With FlightPHP - Carson's Blog"}],["$","meta","2",{"name":"description","content":"Flight PHP is a micro framework for web applications. Flight requires PHP 5.3 or greater, and is released under the MIT license. Flight takes care of some of the most common tasks a web application might need such as; routing, named parameters with friendly URL's, views/layouts, and errors handling. Flight is built to be extremely extensible to go beyond those features."}],["$","meta","3",{"name":"keywords","content":"json php flight"}],["$","meta","4",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","5",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}]]
a:I{"id":4368,"chunks":["95:static/chunks/95-b42e21927908bec6.js","224:static/chunks/224-45995354792692c9.js","106:static/chunks/app/[year]/[month]/[day]/[slug]/page-fd3e7a5daa90e646.js"],"name":"","async":false}
9:T653,<span class="hljs-keyword">require_once</span> <span class="hljs-string">&#x27;vendor/autoload.php&#x27;</span>;
<span class="hljs-comment">//require_once &#x27;flight/Flight.php&#x27;; // If you installed Flight manually</span>

<span class="hljs-title class_">Flight</span>::<span class="hljs-title function_ invoke__">route</span>(<span class="hljs-string">&#x27;GET /json-data&#x27;</span>, function() {
    <span class="hljs-variable">$db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(<span class="hljs-string">&#x27;mysql:host=localhost;dbname=dbname&#x27;</span>, <span class="hljs-string">&#x27;username&#x27;</span>, <span class="hljs-string">&#x27;password&#x27;</span>);

    <span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">&quot;SELECT * FROM posts&quot;</span>);
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();

    <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;Content-type: application/json&#x27;</span>);
    <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">fetchAll</span>());

    <span class="hljs-variable">$db</span> = <span class="hljs-literal">null</span>;
});

<span class="hljs-title class_">Flight</span>::<span class="hljs-title function_ invoke__">start</span>();8:["$","article",null,{"className":"mt-6 md:p-6 bg-white dark:bg-black md:border border-zinc-300 dark:border-zinc-600","children":[["$","header",null,{"children":[["$","$L4",null,{"href":"/2014/06/17/create-a-json-web-service-with-flight-php","children":["$","h2",null,{"className":"text-3xl font-bold mb-2","children":"Create a JSON Web Service With FlightPHP"}]}],["$","p",null,{"className":"mb-4 text-sm text-zinc-500","children":["posted by ","Carson Evans"," ·"," ","Jun 17, 2014"]}]]}],["$","section",null,{"children":["Flight PHP is a micro framework for web applications. Flight requires PHP 5.3 or greater, and is released under the MIT license. Flight takes care of some of the most common tasks a web application might need such as; routing, named parameters with friendly URL's, views/layouts, and errors handling. Flight is built to be extremely extensible to go beyond those features.","\n",["$","h2",null,{"className":"text-2xl font-bold mt-6 mb-2","children":"Installing Flight"}],"\n",["$","p",null,{"className":"my-4","children":"There are two ways to install Flight. With composer (recommended), or manually"}],"\n",["$","h3",null,{"className":"text-xl font-bold mt-6 mb-2","children":"Installing Flight with Composer"}],"\n",["$","p",null,{"className":"my-4","children":"Create a composer.json file with the following contents:"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;require&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;mikecao/flight&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;1.*&quot;</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>"}}]}],"\n",["$","p",null,{"className":"my-4","children":["Then from the command line run: ",["$","code",null,{"className":"font-bold","children":"php composer.phar install"}]]}],"\n",["$","h3",null,{"className":"text-xl font-bold mt-6 mb-2","children":"Install Flight manually"}],"\n",["$","p",null,{"className":"my-4","children":["From the Flight ",["$","a",null,{"href":"https://github.com/mikecao/flight","className":"font-bold underline","children":"github page"}],", download the zip of the repository and extract the framework files to your web app directory."]}],"\n",["$","h3",null,{"className":"text-xl font-bold mt-6 mb-2","children":"Setting up your server"}],"\n",["$","p",null,{"className":"my-4","children":"For Apache web servers you will need to create or edit your .htaccess file with the following:"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-attribute\">RewriteEngine</span> <span class=\"hljs-literal\">On</span>\n<span class=\"hljs-attribute\">RewriteCond</span> <span class=\"hljs-variable\">%{REQUEST_FILENAME}</span> !-f\n<span class=\"hljs-attribute\">RewriteCond</span> <span class=\"hljs-variable\">%{REQUEST_FILENAME}</span> !-d\n<span class=\"hljs-attribute\">RewriteRule</span> ^(.*)$ index.php<span class=\"hljs-meta\"> [QSA,L]</span>"}}]}],"\n",["$","p",null,{"className":"my-4","children":"For Nginx web servers edit your server declaration with the following:"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-section\">server</span> {\n    <span class=\"hljs-section\">location</span> / {\n        <span class=\"hljs-attribute\">try_files</span> <span class=\"hljs-variable\">$uri</span> <span class=\"hljs-variable\">$uri</span>/ /index.php;\n    }\n}"}}]}],"\n",["$","h2",null,{"className":"text-2xl font-bold mt-6 mb-2","children":"Flight hello world"}],"\n",["$","p",null,{"className":"my-4","children":"Create an index.php file in your web directory and start editing it. If you installed Flight with Composer then add the following to the top of the file:"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-keyword\">require_once</span> <span class=\"hljs-string\">&#x27;vendor/autoload.php&#x27;</span>;"}}]}],"\n",["$","p",null,{"className":"my-4","children":"Or, if you installed Flight manually then:"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-keyword\">require_once</span> <span class=\"hljs-string\">&#x27;flight/Flight.php&#x27;</span>;"}}]}],"\n",["$","p",null,{"className":"my-4","children":"Create a route for the index of the application:"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-title class_\">Flight</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">&#x27;/&#x27;</span>, function(){\n    <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&#x27;hello world!&#x27;</span>;\n});"}}]}],"\n",["$","p",null,{"className":"my-4","children":"Then start Flight:"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-title class_\">Flight</span>::<span class=\"hljs-title function_ invoke__\">start</span>();"}}]}],"\n",["$","p",null,{"className":"my-4","children":"The complete code should look like this:"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-keyword\">require_once</span> <span class=\"hljs-string\">&#x27;vendor/autoload.php&#x27;</span>;\n<span class=\"hljs-comment\">//require_once &#x27;flight/Flight.php&#x27;; // If you installed Flight manually</span>\n\n<span class=\"hljs-title class_\">Flight</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">&#x27;/&#x27;</span>, function(){\n    <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&#x27;hello world!&#x27;</span>;\n});\n\n<span class=\"hljs-title class_\">Flight</span>::<span class=\"hljs-title function_ invoke__\">start</span>();"}}]}],"\n",["$","p",null,{"className":"my-4","children":"Now open your browser and navigate to your web applications URL. You should see a \"hello world\" message"}],"\n",["$","h2",null,{"className":"text-2xl font-bold mt-6 mb-2","children":"Create a JSON web service with Flight PHP"}],"\n",["$","h3",null,{"className":"text-xl font-bold mt-6 mb-2","children":"Preface"}],"\n",["$","p",null,{"className":"my-4","children":"This part of the tutorial assumes you have basic knowledge of PHP and MySQL and can do basic operations such as; connect to database through a shell or workbench, creating a database, creating tables, and query a MySQL database from PHP."}],"\n",["$","h3",null,{"className":"text-xl font-bold mt-6 mb-2","children":"Setting up the database"}],"\n",["$","p",null,{"className":"my-4","children":["First thing we are going to do is to set up a simple database. For this example I am going to using MySQL. Either in a MySQL console, or in MySQL workbench create a new database for this tutorial. Make sure the new database is selected with ",["$","code",null,{"className":"font-bold","children":"USE database"}]," replaceing \"database\" with the name you gave the database. Now execute the following:"]}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> posts (\n    id <span class=\"hljs-type\">int</span> unsigned <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-keyword\">NULL</span> AUTO_INCREMENT,\n    title <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">50</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span>,\n    body text,\n    published tinyint <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-number\">0</span>,\n    <span class=\"hljs-keyword\">PRIMARY</span> KEY (id)\n);"}}]}],"\n",["$","p",null,{"className":"my-4","children":"Then insert some data:"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-keyword\">INSERT</span>\n  <span class=\"hljs-keyword\">INTO</span> posts (title, body)\n<span class=\"hljs-keyword\">VALUES</span> (&quot;Flight PHP&quot;, &quot;Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.&quot;);\n\n<span class=\"hljs-keyword\">INSERT</span>\n  <span class=\"hljs-keyword\">INTO</span> posts (title, body)\n<span class=\"hljs-keyword\">VALUES</span> (&quot;Dog and the Fox&quot;, &quot;The quick brown fox jumps over the lazy dog.&quot;);\n\n<span class=\"hljs-keyword\">INSERT</span>\n  <span class=\"hljs-keyword\">INTO</span> posts (title, body)\n<span class=\"hljs-keyword\">VALUES</span> (&quot;PHP&quot;, &quot;PHP is cool!&quot;);"}}]}],"\n",["$","h3",null,{"className":"text-xl font-bold mt-6 mb-2","children":"Create the Flight app"}],"\n",["$","p",null,{"className":"my-4","children":["Now it is time to create the Flight app. For this app, lets get our JSON data from the ",["$","code",null,{"className":"font-bold","children":"/json-data"}]," route."]}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-title class_\">Flight</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">&#x27;GET /json-data&#x27;</span>, function() {\n\n});"}}]}],"\n",["$","h3",null,{"className":"text-xl font-bold mt-6 mb-2","children":"Connect to the database"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-variable\">$db</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_ invoke__\">PDO</span>(<span class=\"hljs-string\">&#x27;mysql:host=localhost;dbname=db&#x27;</span>, <span class=\"hljs-string\">&#x27;username&#x27;</span>, <span class=\"hljs-string\">&#x27;password&#x27;</span>);"}}]}],"\n",["$","p",null,{"className":"my-4","children":"You will need to put your database name in place of \"db\" right after \"dbname=\", and replace the username/password with yours."}],"\n",["$","h3",null,{"className":"text-xl font-bold mt-6 mb-2","children":"Gather the data"}],"\n",["$","p",null,{"className":"my-4","children":"Next we will create a prepared statement and execute it."}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-variable\">$stmt</span> = <span class=\"hljs-variable\">$db</span>-&gt;<span class=\"hljs-title function_ invoke__\">prepare</span>(<span class=\"hljs-string\">&quot;SELECT * FROM posts&quot;</span>);\n<span class=\"hljs-variable\">$stmt</span>-&gt;<span class=\"hljs-title function_ invoke__\">execute</span>();"}}]}],"\n",["$","h3",null,{"className":"text-xl font-bold mt-6 mb-2","children":"Present the data"}],"\n",["$","p",null,{"className":"my-4","children":"And finally, we need to set the content type header to application/json to let the client that connects to this service know what type of data they are receiving. Then we display the results from the prepared statement is JSON format. At the very end close the database connection."}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"<span class=\"hljs-title function_ invoke__\">header</span>(<span class=\"hljs-string\">&#x27;Content-type: application/json&#x27;</span>);\n<span class=\"hljs-keyword\">echo</span> <span class=\"hljs-title function_ invoke__\">json_encode</span>(<span class=\"hljs-variable\">$stmt</span>-&gt;<span class=\"hljs-title function_ invoke__\">fetchAll</span>());\n\n<span class=\"hljs-variable\">$db</span> = <span class=\"hljs-literal\">null</span>;"}}]}],"\n",["$","h3",null,{"className":"text-xl font-bold mt-6 mb-2","children":"Conclusion"}],"\n",["$","p",null,{"className":"my-4","children":"The final product should look something like this:"}],"\n",["$","pre",null,{"className":"my-4 -mx-4 md:-mx-[25px]","children":["$","code",null,{"className":"hljs","dangerouslySetInnerHTML":{"__html":"$9"}}]}],"\n",["$","p",null,{"className":"my-4","children":"If you navigate to you the URL of your web app you should be able to see a JSON string representing each row of the database. Now using either an AJAX call, or a server side HTTP request you will be able to get this JSON data and parse it for a specific use."}],"\n",["$","p",null,{"className":"my-4","children":["$","a",null,{"href":"http://flightphp.com/learn","className":"font-bold underline","children":"Further reading"}]}]]}],["$","footer",null,{"className":"mt-6","children":["$","$La",null,{"title":"Create a JSON Web Service With FlightPHP","postUrl":"/2014/06/17/create-a-json-web-service-with-flight-php"}]}]]}]
